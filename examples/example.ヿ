# line comment

let zero = 0
let zero : int64 = 0
let b = bool
let t = true
let f = false
let float = float64
let pi = 3.14159
let -pi = -3.14159
let pi : float64 = 3.14159

# let pair = 1, 2
# let pair : (- : int64), int64 = 1, 2
# let pair3 = 1, 2, 3
# let pair3 : (- : int64), (- : int64), int64 = 1, 2, 3
# let pair3 : (- : int64), ((- : int64), int64) = 1, 2, 3
# let pair3 : (- : (- : int64), int64), int64 = (1, 2), 3
# let d-pair : (a : type), a = int64, 1
# let d-pair3 : (a : type), (- : int64), a = bool, 1, true
# let d-pair3 : (a : type), (b : type), a = bool, int64, true
# let d-pair3 : (a : type), (b : type), b = bool, int64, 1
# let d-pair4 : (a : type), (b : type), (- : a), b = bool, int64, true, 1

let func : fun(- : int64) → int64 = fun(x : int64) = x
let func3 : fun(- : int64) → fun(- : int64) → int64 = fun(x) = fun(y) = y
let func3 : fun(- : int64) → (fun(- : int64) → int64) = fun(x) = fun(y) = y
let func3 : fun(- : fun(- : int64) → int64) → int64 = fun(f) = f(0)
let d-func = fun(a : type) → a
let d-func3 = fun(a : type) → fun(b : type) → b

let refine-type : type = (- : int64) @ true
let refine-type : type = (x : bool) @ x
let refine-trivial : (- : int64) @ true = 1
let refine-compute-success : (x : int64) @ (fun(y : int64) = true)(x) = 2
let refine-compute-failure : (x : int64) @ (fun(y : int64) = false)(x) = 3
let refine-singleton : (x : bool) @ x = true

let ite = if true then 1 else 2
let ite : if true then int64 else bool = 1
let ite : if false then int64 else bool = true

let not = fun(x : bool) = if x then false else true
let and = fun(x : bool, y : bool) = if x then y else false
let or  = fun(x : bool, y : bool) = if x then true else y
let xor = fun(x : bool, y : bool) = if x then if y then false else true else y

# let id = x → x
# let id = x → if x then x : int64 else 0
let id = fun(x) = if x then x else x
let id = fun(x) = (x : int64)
let id = fun(x : int64) = x
let id : fun(- : int64) → int64 = fun(x) = x
let id : fun(- : int64) → int64 = fun(x : int64) = x
let - : int64 = id(1)

let d-id : fun(a-t : type) → fun(a : a-t) → a-t = fun(a-t : type) = fun(a : a-t) = a
let - : fun(- : int64) → int64 = d-id(int64)
let - : int64 = d-id(int64)(3)
let - : bool = d-id(bool)(true)

fun loop(x : int64) → int64 = loop(x)
fun loop-t(a : type) → type = loop-t(a)
# let error-but-not-diverge : loop-t(type) = type

type
